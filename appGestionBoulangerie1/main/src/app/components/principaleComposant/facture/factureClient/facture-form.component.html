<div class="container mt-4">
  <!-- En-tête -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="mb-0" style="color: #2c5cc5;">
      <i class="bi bi-receipt me-2"></i>Mes Factures
    </h2>
    <div class="d-flex">
      <div class="input-group me-2" style="max-width: 250px;">
        <span class="input-group-text bg-transparent border-end-0">
          <i class="bi bi-search text-secondary"></i>
        </span>
        <input type="text" class="form-control border-start-0" placeholder="Rechercher...">
      </div>
      <button class="btn btn-outline-secondary">
        <i class="bi bi-filter"></i> Filtres
      </button>
    </div>
  </div>

  <!-- Indicateur de chargement -->
  <div *ngIf="loading" class="d-flex justify-content-center align-items-center py-5">
    <div class="text-center">
      <div class="spinner-border text-primary mb-2" role="status">
        <span class="visually-hidden">Chargement...</span>
      </div>
      <p class="text-muted">Chargement de vos factures...</p>
    </div>
  </div>

  <!-- Tableau des factures -->
  <div *ngIf="!loading && factures.length > 0" class="card shadow-sm border-0">
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-hover mb-0">
          <thead class="table-light">
            <tr>
              <th scope="col" class="ps-4">ID</th>
              <th scope="col">Numéro</th>
              <th scope="col">Date</th>
              <th scope="col">Montant</th>
              <th scope="col">Statut</th>
              <th scope="col" class="text-end pe-4">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let f of factures" class="border-bottom">
              <td class="ps-4 fw-semibold">{{f.id}}</td>
              <td>{{f.numero_facture}}</td>
              <td>{{f.date_emission | date:'dd/MM/yyyy'}}</td>
              <td class="fw-semibold">{{f.montant_total | number}} FCFA</td>
              <td>
                <span class="badge rounded-pill"
                      [ngClass]="f.statut === 'payee' ? 'bg-success' : 'bg-warning'">
                  {{f.statut === 'payee' ? 'Payée' : 'Non payée'}}
                </span>
              </td>
              <td class="text-end pe-4">
                <button class="btn btn-sm btn-outline-primary me-2" (click)="voirDetails(f.id)">
                  <i class="bi bi-eye me-1"></i> Détails
                </button>
                <button class="btn btn-sm btn-primary" (click)="telechargerFacture(f.id)">
                  <i class="bi bi-download me-1"></i> PDF
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Message quand il n'y a pas de factures -->
  <div *ngIf="!loading && factures.length === 0" class="card border-0 shadow-sm mt-3">
    <div class="card-body text-center py-5">
      <i class="bi bi-file-text display-4 text-muted mb-3"></i>
      <h5 class="text-muted">Aucune facture</h5>
      <p class="text-muted mb-0">Vous n'avez aucune facture pour le moment.</p>
    </div>
  </div>
</div>
